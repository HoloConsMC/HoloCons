From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Derek Lee <derek.scott.lee13@gmail.com>
Date: Thu, 30 Mar 2023 19:31:24 -0700
Subject: [PATCH] Add VirtualGolem mob


diff --git a/src/main/java/xyz/holocons/mc/HoloConsRegistries.java b/src/main/java/xyz/holocons/mc/HoloConsRegistries.java
index 690788f8adde4128c29b093bc3df0fceccefeccf..056a36f4960201ec36fda91b3ee2f00ec6ac10c7 100644
--- a/src/main/java/xyz/holocons/mc/HoloConsRegistries.java
+++ b/src/main/java/xyz/holocons/mc/HoloConsRegistries.java
@@ -1,13 +1,47 @@
 package xyz.holocons.mc;
 
+import java.util.StringJoiner;
+
 import org.slf4j.Logger;
 
+import com.google.common.collect.ImmutableSet;
+
+import net.minecraft.core.Registry;
+import net.minecraft.core.registries.BuiltInRegistries;
+import net.minecraft.world.entity.Entity;
+import net.minecraft.world.entity.EntityDimensions;
+import net.minecraft.world.entity.EntityType;
+import net.minecraft.world.entity.MobCategory;
+import net.minecraft.world.flag.FeatureFlags;
+import xyz.holocons.mc.entity.VirtualGolem;
+
 public final class HoloConsRegistries {
 
     private HoloConsRegistries() {
     }
 
     public static void bootStrap(final Logger logger) {
-        logger.info("Running HoloCons bootstrap");
+        new HoloConsRegistries.EntityTypes();
+        logger.info("HoloCons bootstrapped successfully");
+    }
+
+    public static class EntityTypes {
+
+        private EntityTypes() {
+        }
+
+        // private static <T extends Entity> EntityType<T> register(String id, EntityType.Builder<? super T> type) {
+        //     @SuppressWarnings("unchecked")
+        //     final var entityType = (EntityType<T>) type.build(id);
+        //     return Registry.register(BuiltInRegistries.ENTITY_TYPE, id, entityType);
+        // }
+
+        private static <T extends Entity> EntityType<T> register(String id, EntityType.EntityFactory<T> factory, MobCategory spawnGroup, boolean saveable, boolean summonable, boolean fireImmune, boolean spawnableFarFromPlayer, EntityDimensions dimensions, int maxTrackDistance, int trackTickInterval) {
+            return Registry.register(BuiltInRegistries.ENTITY_TYPE, id, new EntityType<>(factory, spawnGroup, saveable, summonable, fireImmune, spawnableFarFromPlayer, ImmutableSet.of(), dimensions, maxTrackDistance, trackTickInterval, FeatureFlags.VANILLA_SET, id));
+        }
+
+        //public static final EntityType<VirtualGolem> VIRTUAL_GOLEM = EntityTypes.register("virtual_golem", EntityType.Builder.of(VirtualGolem::new, MobCategory.MISC).noSave().noSummon().sized(0.6F, 1.8F).clientTrackingRange(32).updateInterval(2));
+        //TODO: make not summonable
+        public static final EntityType<VirtualGolem> VIRTUAL_GOLEM = EntityTypes.register("virtual_golem", VirtualGolem::new, MobCategory.MISC, false, true, false, true, EntityDimensions.scalable(0.6F, 1.8F), 32, 2);
     }
 }
diff --git a/src/main/java/xyz/holocons/mc/entity/VirtualGolem.java b/src/main/java/xyz/holocons/mc/entity/VirtualGolem.java
new file mode 100644
index 0000000000000000000000000000000000000000..94ce4ee71722cba2612e690666c6a299a8e07fae
--- /dev/null
+++ b/src/main/java/xyz/holocons/mc/entity/VirtualGolem.java
@@ -0,0 +1,19 @@
+package xyz.holocons.mc.entity;
+
+import net.minecraft.world.entity.EntityType;
+import net.minecraft.world.entity.ai.attributes.AttributeSupplier;
+import net.minecraft.world.entity.ai.attributes.Attributes;
+import net.minecraft.world.entity.animal.AbstractGolem;
+import net.minecraft.world.entity.animal.IronGolem;
+import net.minecraft.world.level.Level;
+
+public class VirtualGolem extends AbstractGolem {
+
+    public VirtualGolem(EntityType<? extends VirtualGolem> type, Level world) {
+        super(type, world);
+    }
+
+    public static AttributeSupplier.Builder createAttributes() {
+        return IronGolem.createAttributes().add(Attributes.MAX_HEALTH, 200.0D);
+    }
+}
